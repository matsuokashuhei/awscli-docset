<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    
  
    <title>create-approval-rule-template — AWS CLI 1.16.309 Command Reference</title>
  <link rel="stylesheet" type="text/css" href="../../_static/bootstrap.min.css">
  <script type="text/javascript" src="../../_static/jquery-1.9.1.min.js"></script>
  <script src="/SdkStatic/sdk-priv.js" async="true"></script>
    
    <link rel="stylesheet" href="../../_static/guzzle.css" type="text/css">
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css">
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.16.309',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="AWS CLI 1.16.309 Command Reference" href="../../index.html">
    <link rel="up" title="codecommit" href="index.html">
    <link rel="next" title="create-branch" href="create-branch.html">
    <link rel="prev" title="batch-get-repositories" href="batch-get-repositories.html">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" type="text/css" href="../../_static/bootstrap-responsive.min.css">
  
   

  </head>
  <body>
  
  
  <!--REGION_DISCLAIMER_DO_NOT_REMOVE-->

    
    <div class="container">
        
    
  
        <div class="document clearer">
      
            <div class="body">
              
  
<div class="section" id="create-approval-rule-template">
<span id="cli-aws-codecommit-create-approval-rule-template"></span><h1>create-approval-rule-template<a class="headerlink" href="#create-approval-rule-template" title="Permalink to this headline">¶</a>
</h1>
<div class="section" id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a>
</h2>
<p>Creates a template for approval rules that can then be associated with one or more repositories in your AWS account. When you associate a template with a repository, AWS CodeCommit creates an approval rule that matches the conditions of the template for all pull requests that meet the conditions of the template. For more information, see  AssociateApprovalRuleTemplateWithRepository .</p>
<p>See also: <a class="reference external" href="https://docs.aws.amazon.com/goto/WebAPI/codecommit-2015-04-13/CreateApprovalRuleTemplate">AWS API Documentation</a></p>
<p>See <a class="reference internal" href="../index.html"><em>'aws help'</em></a> for descriptions of global parameters.</p>
</div>
<div class="section" id="synopsis">
<h2>Synopsis<a class="headerlink" href="#synopsis" title="Permalink to this headline">¶</a>
</h2>
<div class="highlight-python">
<pre>  create-approval-rule-template
--approval-rule-template-name &lt;value&gt;
--approval-rule-template-content &lt;value&gt;
[--approval-rule-template-description &lt;value&gt;]
[--cli-input-json &lt;value&gt;]
[--generate-cli-skeleton &lt;value&gt;]</pre>
</div>
</div>
<div class="section" id="options">
<h2>Options<a class="headerlink" href="#options" title="Permalink to this headline">¶</a>
</h2>
<p><tt class="docutils literal"><span class="pre">--approval-rule-template-name</span></tt> (string)</p>
<blockquote>
<div>The name of the approval rule template. Provide descriptive names, because this name is applied to the approval rules created automatically in associated repositories.</div>
</blockquote>
<p><tt class="docutils literal"><span class="pre">--approval-rule-template-content</span></tt> (string)</p>
<blockquote>
<div>
<p>The content of the approval rule that is created on pull requests in associated repositories. If you specify one or more destination references (branches), approval rules are created in an associated repository only if their destination references (branches) match those specified in the template.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>When you create the content of the approval rule template, you can specify approvers in an approval pool in one of two ways:</p>
<ul class="simple">
<li>
<strong>CodeCommitApprovers</strong> : This option only requires an AWS account and a resource. It can be used for both IAM users and federated access users whose name matches the provided resource name. This is a very powerful option that offers a great deal of flexibility. For example, if you specify the AWS account <em>123456789012</em> and <em>Mary_Major</em> , all of the following are counted as approvals coming from that user:<ul>
<li>An IAM user in the account (arn:aws:iam::<em>123456789012</em> :user/<em>Mary_Major</em> )</li>
<li>A federated user identified in IAM as Mary_Major (arn:aws:sts::<em>123456789012</em> :federated-user/<em>Mary_Major</em> )</li>
</ul>
</li>
</ul>
<p>This option does not recognize an active session of someone assuming the role of CodeCommitReview with a role session name of <em>Mary_Major</em> (arn:aws:sts::<em>123456789012</em> :assumed-role/CodeCommitReview/<em>Mary_Major</em> ) unless you include a wildcard (<a href="#id1"><span class="problematic" id="id2">*</span></a>Mary_Major).</p>
<ul class="simple">
<li>
<strong>Fully qualified ARN</strong> : This option allows you to specify the fully qualified Amazon Resource Name (ARN) of the IAM user or role.</li>
</ul>
<p class="last">For more information about IAM ARNs, wildcards, and formats, see <a class="reference external" href="https://docs.aws.amazon.com/iam/latest/UserGuide/reference_identifiers.html">IAM Identifiers</a> in the <em>IAM User Guide</em> .</p>
</div>
</div>
</blockquote>
<p><tt class="docutils literal"><span class="pre">--approval-rule-template-description</span></tt> (string)</p>
<blockquote>
<div>The description of the approval rule template. Consider providing a description that explains what this template does and when it might be appropriate to associate it with repositories.</div>
</blockquote>
<p><tt class="docutils literal"><span class="pre">--cli-input-json</span></tt> (string)
Performs service operation based on the JSON string provided. The JSON string follows the format provided by <tt class="docutils literal"><span class="pre">--generate-cli-skeleton</span></tt>. If other arguments are provided on the command line, the CLI values will override the JSON-provided values. It is not possible to pass arbitrary binary values using a JSON-provided value as the string will be taken literally.</p>
<p><tt class="docutils literal"><span class="pre">--generate-cli-skeleton</span></tt> (string)
Prints a JSON skeleton to standard output without sending an API request. If provided with no value or the value <tt class="docutils literal"><span class="pre">input</span></tt>, prints a sample input JSON that can be used as an argument for <tt class="docutils literal"><span class="pre">--cli-input-json</span></tt>. If provided with the value <tt class="docutils literal"><span class="pre">output</span></tt>, it validates the command inputs and returns a sample output JSON for that command.</p>
<p>See <a class="reference internal" href="../index.html"><em>'aws help'</em></a> for descriptions of global parameters.</p>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a>
</h2>
<p><strong>To create an approval rule template</strong></p>
<p>The following <tt class="docutils literal"><span class="pre">create-approval-rule-template</span></tt> example creates an approval rule template named <tt class="docutils literal"><span class="pre">2-approver-rule-for-master</span> <span class="pre">``.</span> <span class="pre">The</span> <span class="pre">template</span> <span class="pre">requires</span> <span class="pre">two</span> <span class="pre">users</span> <span class="pre">who</span> <span class="pre">assume</span> <span class="pre">the</span> <span class="pre">role</span> <span class="pre">of</span> <span class="pre">``CodeCommitReview</span></tt> to approve any pull request before it can be merged to the <tt class="docutils literal"><span class="pre">master</span></tt> branch.</p>
<div class="highlight-python">
<pre>aws codecommit create-approval-rule-template \
    --approval-rule-template-name 2-approver-rule-for-master  \
    --approval-rule-template-description  "Requires two developers from the team to approve the pull request if the destination branch is master"  \
    --approval-rule-template-content "{\"Version\": \"2018-11-08\",\"DestinationReferences\": [\"refs/heads/master\"],\"Statements\": [{\"Type\": \"Approvers\",\"NumberOfApprovalsNeeded\": 2,\"ApprovalPoolMembers\": [\"arn:aws:sts::123456789012:assumed-role/CodeCommitReview/*\"]}]}"</pre>
</div>
<p>Output:</p>
<div class="highlight-python">
<div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">"approvalRuleTemplate"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"approvalRuleTemplateName"</span><span class="p">:</span> <span class="s2">"2-approver-rule-for-master"</span><span class="p">,</span>
        <span class="s2">"creationDate"</span><span class="p">:</span> <span class="mf">1571356106.936</span><span class="p">,</span>
        <span class="s2">"approvalRuleTemplateId"</span><span class="p">:</span> <span class="s2">"dd8b17fe-EXAMPLE"</span><span class="p">,</span>
        <span class="s2">"approvalRuleTemplateContent"</span><span class="p">:</span> <span class="s2">"{</span><span class="se">\"</span><span class="s2">Version</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">2018-11-08</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">DestinationReferences</span><span class="se">\"</span><span class="s2">: [</span><span class="se">\"</span><span class="s2">refs/heads/master</span><span class="se">\"</span><span class="s2">],</span><span class="se">\"</span><span class="s2">Statements</span><span class="se">\"</span><span class="s2">: [{</span><span class="se">\"</span><span class="s2">Type</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">Approvers</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">NumberOfApprovalsNeeded</span><span class="se">\"</span><span class="s2">: 2,</span><span class="se">\"</span><span class="s2">ApprovalPoolMembers</span><span class="se">\"</span><span class="s2">: [</span><span class="se">\"</span><span class="s2">arn:aws:sts::123456789012:assumed-role/CodeCommitReview/*</span><span class="se">\"</span><span class="s2">]}]}"</span><span class="p">,</span>
        <span class="s2">"lastModifiedUser"</span><span class="p">:</span> <span class="s2">"arn:aws:iam::123456789012:user/Mary_Major"</span><span class="p">,</span>
        <span class="s2">"approvalRuleTemplateDescription"</span><span class="p">:</span> <span class="s2">"Requires two developers from the team to approve the pull request if the destination branch is master"</span><span class="p">,</span>
        <span class="s2">"lastModifiedDate"</span><span class="p">:</span> <span class="mf">1571356106.936</span><span class="p">,</span>
        <span class="s2">"ruleContentSha256"</span><span class="p">:</span> <span class="s2">"4711b576EXAMPLE"</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>For more information, see <a class="reference external" href="https://docs.aws.amazon.com/codecommit/latest/userguide/how-to-create-template.html#create-template-cli">Create an Approval Rule Template</a> in the <em>AWS CodeCommit User Guide</em>.</p>
</div>
<div class="section" id="output">
<h2>Output<a class="headerlink" href="#output" title="Permalink to this headline">¶</a>
</h2>
<p>approvalRuleTemplate -&gt; (structure)</p>
<blockquote>
<div>
<p>The content and structure of the created approval rule template.</p>
<p>approvalRuleTemplateId -&gt; (string)</p>
<blockquote>
<div>The system-generated ID of the approval rule template.</div>
</blockquote>
<p>approvalRuleTemplateName -&gt; (string)</p>
<blockquote>
<div>The name of the approval rule template.</div>
</blockquote>
<p>approvalRuleTemplateDescription -&gt; (string)</p>
<blockquote>
<div>The description of the approval rule template.</div>
</blockquote>
<p>approvalRuleTemplateContent -&gt; (string)</p>
<blockquote>
<div>The content of the approval rule template.</div>
</blockquote>
<p>ruleContentSha256 -&gt; (string)</p>
<blockquote>
<div>The SHA-256 hash signature for the content of the approval rule template.</div>
</blockquote>
<p>lastModifiedDate -&gt; (timestamp)</p>
<blockquote>
<div>The date the approval rule template was most recently changed, in timestamp format.</div>
</blockquote>
<p>creationDate -&gt; (timestamp)</p>
<blockquote>
<div>The date the approval rule template was created, in timestamp format.</div>
</blockquote>
<p>lastModifiedUser -&gt; (string)</p>
<blockquote>
<div>The Amazon Resource Name (ARN) of the user who made the most recent changes to the approval rule template.</div>
</blockquote>
</div>
</blockquote>
</div>
</div>


            </div>
          <div class="clearfix"></div>
        </div>
        
    
  

    </div>
  <script type="text/javascript" src="https://media.amazonwebservices.com/js/sitecatalyst/s_code.min.js"></script>
  <script type="text/javascript">
  s.prop66 = 'AWS CLI';
  s.eVar66 = 'D=c66';
  s.prop65 = 'API Reference';
  s.eVar65 = 'D=c65';
  var s_code = s.t();
  if (s_code) document.write(s_code);
  </script>
    
  



  
    
  
  </body>
</html>
