<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    
  
    <title>create-deployment — AWS CLI 1.16.298 Command Reference</title>
  <link rel="stylesheet" type="text/css" href="../../_static/bootstrap.min.css">
  <script type="text/javascript" src="../../_static/jquery-1.9.1.min.js"></script>
  <script src="/SdkStatic/sdk-priv.js" async="true"></script>
    
    <link rel="stylesheet" href="../../_static/guzzle.css" type="text/css">
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css">
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.16.298',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="AWS CLI 1.16.298 Command Reference" href="../../index.html">
    <link rel="up" title="deploy" href="index.html">
    <link rel="next" title="create-deployment-config" href="create-deployment-config.html">
    <link rel="prev" title="create-application" href="create-application.html">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" type="text/css" href="../../_static/bootstrap-responsive.min.css">
  
   

  </head>
  <body>
  
  
  <!--REGION_DISCLAIMER_DO_NOT_REMOVE-->

    
    <div class="container">
        
    
  
        <div class="document clearer">
      
            <div class="body">
              
  
<div class="section" id="create-deployment">
<span id="cli-aws-deploy-create-deployment"></span><h1>create-deployment<a class="headerlink" href="#create-deployment" title="Permalink to this headline">¶</a>
</h1>
<div class="section" id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a>
</h2>
<p>Deploys an application revision through the specified deployment group.</p>
<p>See also: <a class="reference external" href="https://docs.aws.amazon.com/goto/WebAPI/codedeploy-2014-10-06/CreateDeployment">AWS API Documentation</a></p>
<p>See <a class="reference internal" href="../index.html"><em>'aws help'</em></a> for descriptions of global parameters.</p>
</div>
<div class="section" id="synopsis">
<h2>Synopsis<a class="headerlink" href="#synopsis" title="Permalink to this headline">¶</a>
</h2>
<div class="highlight-python">
<pre>  create-deployment
--application-name &lt;value&gt;
[--deployment-group-name &lt;value&gt;]
[--revision &lt;value&gt;]
[--deployment-config-name &lt;value&gt;]
[--description &lt;value&gt;]
[--ignore-application-stop-failures | --no-ignore-application-stop-failures]
[--target-instances &lt;value&gt;]
[--auto-rollback-configuration &lt;value&gt;]
[--update-outdated-instances-only | --no-update-outdated-instances-only]
[--file-exists-behavior &lt;value&gt;]
[--s3-location &lt;value&gt;]
[--github-location &lt;value&gt;]
[--cli-input-json &lt;value&gt;]
[--generate-cli-skeleton &lt;value&gt;]</pre>
</div>
</div>
<div class="section" id="options">
<h2>Options<a class="headerlink" href="#options" title="Permalink to this headline">¶</a>
</h2>
<p><tt class="docutils literal"><span class="pre">--application-name</span></tt> (string)</p>
<blockquote>
<div>The name of an AWS CodeDeploy application associated with the IAM user or AWS account.</div>
</blockquote>
<p><tt class="docutils literal"><span class="pre">--deployment-group-name</span></tt> (string)</p>
<blockquote>
<div>The name of the deployment group.</div>
</blockquote>
<p><tt class="docutils literal"><span class="pre">--revision</span></tt> (structure)</p>
<blockquote>
<div>The type and location of the revision to deploy.</div>
</blockquote>
<p>Shorthand Syntax:</p>
<div class="highlight-python">
<pre>revisionType=string,s3Location={bucket=string,key=string,bundleType=string,version=string,eTag=string},gitHubLocation={repository=string,commitId=string},string={content=string,sha256=string},appSpecContent={content=string,sha256=string}</pre>
</div>
<p>JSON Syntax:</p>
<div class="highlight-python">
<div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">"revisionType"</span><span class="p">:</span> <span class="s2">"S3"</span><span class="o">|</span><span class="s2">"GitHub"</span><span class="o">|</span><span class="s2">"String"</span><span class="o">|</span><span class="s2">"AppSpecContent"</span><span class="p">,</span>
  <span class="s2">"s3Location"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"bucket"</span><span class="p">:</span> <span class="s2">"string"</span><span class="p">,</span>
    <span class="s2">"key"</span><span class="p">:</span> <span class="s2">"string"</span><span class="p">,</span>
    <span class="s2">"bundleType"</span><span class="p">:</span> <span class="s2">"tar"</span><span class="o">|</span><span class="s2">"tgz"</span><span class="o">|</span><span class="s2">"zip"</span><span class="o">|</span><span class="s2">"YAML"</span><span class="o">|</span><span class="s2">"JSON"</span><span class="p">,</span>
    <span class="s2">"version"</span><span class="p">:</span> <span class="s2">"string"</span><span class="p">,</span>
    <span class="s2">"eTag"</span><span class="p">:</span> <span class="s2">"string"</span>
  <span class="p">},</span>
  <span class="s2">"gitHubLocation"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"repository"</span><span class="p">:</span> <span class="s2">"string"</span><span class="p">,</span>
    <span class="s2">"commitId"</span><span class="p">:</span> <span class="s2">"string"</span>
  <span class="p">},</span>
  <span class="s2">"string"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"content"</span><span class="p">:</span> <span class="s2">"string"</span><span class="p">,</span>
    <span class="s2">"sha256"</span><span class="p">:</span> <span class="s2">"string"</span>
  <span class="p">},</span>
  <span class="s2">"appSpecContent"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"content"</span><span class="p">:</span> <span class="s2">"string"</span><span class="p">,</span>
    <span class="s2">"sha256"</span><span class="p">:</span> <span class="s2">"string"</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p><tt class="docutils literal"><span class="pre">--deployment-config-name</span></tt> (string)</p>
<blockquote>
<div>
<p>The name of a deployment configuration associated with the IAM user or AWS account.</p>
<p>If not specified, the value configured in the deployment group is used as the default. If the deployment group does not have a deployment configuration associated with it, CodeDeployDefault.OneAtATime is used by default.</p>
</div>
</blockquote>
<p><tt class="docutils literal"><span class="pre">--description</span></tt> (string)</p>
<blockquote>
<div>A comment about the deployment.</div>
</blockquote>
<p><tt class="docutils literal"><span class="pre">--ignore-application-stop-failures</span></tt> | <tt class="docutils literal"><span class="pre">--no-ignore-application-stop-failures</span></tt> (boolean)</p>
<blockquote>
<div>
<p>If true, then if an ApplicationStop, BeforeBlockTraffic, or AfterBlockTraffic deployment lifecycle event to an instance fails, then the deployment continues to the next deployment lifecycle event. For example, if ApplicationStop fails, the deployment continues with DownloadBundle. If BeforeBlockTraffic fails, the deployment continues with BlockTraffic. If AfterBlockTraffic fails, the deployment continues with ApplicationStop.</p>
<p>If false or not specified, then if a lifecycle event fails during a deployment to an instance, that deployment fails. If deployment to that instance is part of an overall deployment and the number of healthy hosts is not less than the minimum number of healthy hosts, then a deployment to the next instance is attempted.</p>
<p>During a deployment, the AWS CodeDeploy agent runs the scripts specified for ApplicationStop, BeforeBlockTraffic, and AfterBlockTraffic in the AppSpec file from the previous successful deployment. (All other scripts are run from the AppSpec file in the current deployment.) If one of these scripts contains an error and does not run successfully, the deployment can fail.</p>
<p>If the cause of the failure is a script from the last successful deployment that will never run successfully, create a new deployment and use <tt class="docutils literal"><span class="pre">ignoreApplicationStopFailures</span></tt> to specify that the ApplicationStop, BeforeBlockTraffic, and AfterBlockTraffic failures should be ignored.</p>
</div>
</blockquote>
<p><tt class="docutils literal"><span class="pre">--target-instances</span></tt> (structure)</p>
<blockquote>
<div>Information about the instances that belong to the replacement environment in a blue/green deployment.</div>
</blockquote>
<p>JSON Syntax:</p>
<div class="highlight-python">
<pre>{
  "tagFilters": [
    {
      "Key": "string",
      "Value": "string",
      "Type": "KEY_ONLY"|"VALUE_ONLY"|"KEY_AND_VALUE"
    }
    ...
  ],
  "autoScalingGroups": ["string", ...],
  "ec2TagSet": {
    "ec2TagSetList": [
      [
        {
          "Key": "string",
          "Value": "string",
          "Type": "KEY_ONLY"|"VALUE_ONLY"|"KEY_AND_VALUE"
        }
        ...
      ]
      ...
    ]
  }
}</pre>
</div>
<p><tt class="docutils literal"><span class="pre">--auto-rollback-configuration</span></tt> (structure)</p>
<blockquote>
<div>Configuration information for an automatic rollback that is added when a deployment is created.</div>
</blockquote>
<p>Shorthand Syntax:</p>
<div class="highlight-python">
<div class="highlight"><pre><span></span><span class="n">enabled</span><span class="o">=</span><span class="n">boolean</span><span class="p">,</span><span class="n">events</span><span class="o">=</span><span class="n">string</span><span class="p">,</span><span class="n">string</span>
</pre></div>
</div>
<p>JSON Syntax:</p>
<div class="highlight-python">
<div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">"enabled"</span><span class="p">:</span> <span class="n">true</span><span class="o">|</span><span class="n">false</span><span class="p">,</span>
  <span class="s2">"events"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"DEPLOYMENT_FAILURE"</span><span class="o">|</span><span class="s2">"DEPLOYMENT_STOP_ON_ALARM"</span><span class="o">|</span><span class="s2">"DEPLOYMENT_STOP_ON_REQUEST"</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p><tt class="docutils literal"><span class="pre">--update-outdated-instances-only</span></tt> | <tt class="docutils literal"><span class="pre">--no-update-outdated-instances-only</span></tt> (boolean)</p>
<blockquote>
<div>Indicates whether to deploy to all instances or only to instances that are not running the latest application revision.</div>
</blockquote>
<p><tt class="docutils literal"><span class="pre">--file-exists-behavior</span></tt> (string)</p>
<blockquote>
<div>
<p>Information about how AWS CodeDeploy handles files that already exist in a deployment target location but weren't part of the previous successful deployment.</p>
<p>The fileExistsBehavior parameter takes any of the following values:</p>
<ul class="simple">
<li>DISALLOW: The deployment fails. This is also the default behavior if no option is specified.</li>
<li>OVERWRITE: The version of the file from the application revision currently being deployed replaces the version already on the instance.</li>
<li>RETAIN: The version of the file already on the instance is kept and used as part of the new deployment.</li>
</ul>
<p>Possible values:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">DISALLOW</span></tt></li>
<li><tt class="docutils literal"><span class="pre">OVERWRITE</span></tt></li>
<li><tt class="docutils literal"><span class="pre">RETAIN</span></tt></li>
</ul>
</div>
</blockquote>
<p><tt class="docutils literal"><span class="pre">--s3-location</span></tt> (structure)
Information about the location of the application revision in Amazon S3. You must specify the bucket, the key, and bundleType. Optionally, you can also specify an eTag and version.</p>
<p>Shorthand Syntax:</p>
<div class="highlight-python">
<div class="highlight"><pre><span></span><span class="n">bundleType</span><span class="o">=</span><span class="n">string</span><span class="p">,</span><span class="n">eTag</span><span class="o">=</span><span class="n">string</span><span class="p">,</span><span class="n">bucket</span><span class="o">=</span><span class="n">string</span><span class="p">,</span><span class="n">version</span><span class="o">=</span><span class="n">string</span><span class="p">,</span><span class="n">key</span><span class="o">=</span><span class="n">string</span>
</pre></div>
</div>
<p>JSON Syntax:</p>
<div class="highlight-python">
<div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">"bundleType"</span><span class="p">:</span> <span class="s2">"tar"</span><span class="o">|</span><span class="s2">"tgz"</span><span class="o">|</span><span class="s2">"zip"</span><span class="p">,</span>
  <span class="s2">"eTag"</span><span class="p">:</span> <span class="s2">"string"</span><span class="p">,</span>
  <span class="s2">"bucket"</span><span class="p">:</span> <span class="s2">"string"</span><span class="p">,</span>
  <span class="s2">"version"</span><span class="p">:</span> <span class="s2">"string"</span><span class="p">,</span>
  <span class="s2">"key"</span><span class="p">:</span> <span class="s2">"string"</span>
<span class="p">}</span>
</pre></div>
</div>
<p><tt class="docutils literal"><span class="pre">--github-location</span></tt> (structure)
Information about the location of the application revision in GitHub. You must specify the repository and commit ID that references the application revision. For the repository, use the format GitHub-account/repository-name or GitHub-org/repository-name. For the commit ID, use the SHA1 Git commit reference.</p>
<p>Shorthand Syntax:</p>
<div class="highlight-python">
<div class="highlight"><pre><span></span><span class="n">commitId</span><span class="o">=</span><span class="n">string</span><span class="p">,</span><span class="n">repository</span><span class="o">=</span><span class="n">string</span>
</pre></div>
</div>
<p>JSON Syntax:</p>
<div class="highlight-python">
<div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">"commitId"</span><span class="p">:</span> <span class="s2">"string"</span><span class="p">,</span>
  <span class="s2">"repository"</span><span class="p">:</span> <span class="s2">"string"</span>
<span class="p">}</span>
</pre></div>
</div>
<p><tt class="docutils literal"><span class="pre">--cli-input-json</span></tt> (string)
Performs service operation based on the JSON string provided. The JSON string follows the format provided by <tt class="docutils literal"><span class="pre">--generate-cli-skeleton</span></tt>. If other arguments are provided on the command line, the CLI values will override the JSON-provided values. It is not possible to pass arbitrary binary values using a JSON-provided value as the string will be taken literally.</p>
<p><tt class="docutils literal"><span class="pre">--generate-cli-skeleton</span></tt> (string)
Prints a JSON skeleton to standard output without sending an API request. If provided with no value or the value <tt class="docutils literal"><span class="pre">input</span></tt>, prints a sample input JSON that can be used as an argument for <tt class="docutils literal"><span class="pre">--cli-input-json</span></tt>. If provided with the value <tt class="docutils literal"><span class="pre">output</span></tt>, it validates the command inputs and returns a sample output JSON for that command.</p>
<p>See <a class="reference internal" href="../index.html"><em>'aws help'</em></a> for descriptions of global parameters.</p>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a>
</h2>
<p><strong>Example 1: To create a CodeDeploy deployment using the EC2/On-premises compute platform</strong></p>
<p>The following <tt class="docutils literal"><span class="pre">create-deployment</span></tt> example creates a deployment and associates it with the user's AWS account.</p>
<div class="highlight-python">
<pre>aws deploy create-deployment \
    --application-name WordPress_App \
    --deployment-config-name CodeDeployDefault.OneAtATime \
    --deployment-group-name WordPress_DG \
    --description "My demo deployment" \
    --s3-location bucket=CodeDeployDemoBucket,bundleType=zip,eTag=dd56cfdEXAMPLE8e768f9d77fEXAMPLE,key=WordPressApp.zip</pre>
</div>
<p>Output:</p>
<div class="highlight-python">
<div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">"deploymentId"</span><span class="p">:</span> <span class="s2">"d-A1B2C3111"</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Example 2: To create a CodeDeploy deployment using the Amazon ECS compute platform</strong></p>
<p>The following <tt class="docutils literal"><span class="pre">create-deployment</span></tt> example uses the following two files to deploy an Amazon ECS service.</p>
<p>Contents of <tt class="docutils literal"><span class="pre">create-deployment.json</span></tt> file:</p>
<div class="highlight-python">
<div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">"applicationName"</span><span class="p">:</span> <span class="s2">"ecs-deployment"</span><span class="p">,</span>
    <span class="s2">"deploymentGroupName"</span><span class="p">:</span> <span class="s2">"ecs-deployment-dg"</span><span class="p">,</span>
    <span class="s2">"revision"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"revisionType"</span><span class="p">:</span> <span class="s2">"S3"</span><span class="p">,</span>
        <span class="s2">"s3Location"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"bucket"</span><span class="p">:</span> <span class="s2">"ecs-deployment-bucket"</span><span class="p">,</span>
            <span class="s2">"key"</span><span class="p">:</span> <span class="s2">"appspec.yaml"</span><span class="p">,</span>
            <span class="s2">"bundleType"</span><span class="p">:</span> <span class="s2">"YAML"</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>That file, in turn, retrieves the following file <tt class="docutils literal"><span class="pre">appspec.yaml</span></tt> from an S3 bucket called <tt class="docutils literal"><span class="pre">ecs-deployment-bucket</span></tt>.</p>
<div class="highlight-python">
<pre>version: 0.0
Resources:
  - TargetService:
      Type: AWS::ECS::Service
      Properties:
        TaskDefinition: "arn:aws:ecs:region:123456789012:task-definition/ecs-task-def:2"
        LoadBalancerInfo:
          ContainerName: "sample-app"
          ContainerPort: 80
        PlatformVersion: "LATEST"</pre>
</div>
<p>Command:</p>
<div class="highlight-python">
<pre>aws deploy create-deployment \
    --cli-input-json file://create-deployment.json \
    --region us-east-1</pre>
</div>
<p>Output:</p>
<div class="highlight-python">
<div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">"deploymentId"</span><span class="p">:</span> <span class="s2">"d-1234ABCDE"</span>
<span class="p">}</span>
</pre></div>
</div>
<p>For more information, see <a class="reference external" href="https://docs.aws.amazon.com/codedeploy/latest/APIReference/API_CreateDeployment.html">CreateDeployment</a> in the <em>AWS CodeDeploy API Reference</em>.</p>
</div>
<div class="section" id="output">
<h2>Output<a class="headerlink" href="#output" title="Permalink to this headline">¶</a>
</h2>
<p>deploymentId -&gt; (string)</p>
<blockquote>
<div>The unique ID of a deployment.</div>
</blockquote>
</div>
</div>


            </div>
          <div class="clearfix"></div>
        </div>
        
    
  

    </div>
  <script type="text/javascript" src="https://media.amazonwebservices.com/js/sitecatalyst/s_code.min.js"></script>
  <script type="text/javascript">
  s.prop66 = 'AWS CLI';
  s.eVar66 = 'D=c66';
  s.prop65 = 'API Reference';
  s.eVar65 = 'D=c65';
  var s_code = s.t();
  if (s_code) document.write(s_code);
  </script>
    
  



  
    
  
  </body>
</html>
