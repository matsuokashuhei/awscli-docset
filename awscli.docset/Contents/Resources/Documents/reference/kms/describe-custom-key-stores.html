<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    
  
    <title>describe-custom-key-stores — AWS CLI 1.16.298 Command Reference</title>
  <link rel="stylesheet" type="text/css" href="../../_static/bootstrap.min.css">
  <script type="text/javascript" src="../../_static/jquery-1.9.1.min.js"></script>
  <script src="/SdkStatic/sdk-priv.js" async="true"></script>
    
    <link rel="stylesheet" href="../../_static/guzzle.css" type="text/css">
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css">
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.16.298',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="AWS CLI 1.16.298 Command Reference" href="../../index.html">
    <link rel="up" title="kms" href="index.html">
    <link rel="next" title="describe-key" href="describe-key.html">
    <link rel="prev" title="delete-imported-key-material" href="delete-imported-key-material.html">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" type="text/css" href="../../_static/bootstrap-responsive.min.css">
  
   

  </head>
  <body>
  
  
  <!--REGION_DISCLAIMER_DO_NOT_REMOVE-->

    
    <div class="container">
        
    
  
        <div class="document clearer">
      
            <div class="body">
              
  
<div class="section" id="describe-custom-key-stores">
<span id="cli-aws-kms-describe-custom-key-stores"></span><h1>describe-custom-key-stores<a class="headerlink" href="#describe-custom-key-stores" title="Permalink to this headline">¶</a>
</h1>
<div class="section" id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a>
</h2>
<p>Gets information about <a class="reference external" href="https://docs.aws.amazon.com/kms/latest/developerguide/custom-key-store-overview.html">custom key stores</a> in the account and region.</p>
<p>This operation is part of the <a class="reference external" href="https://docs.aws.amazon.com/kms/latest/developerguide/custom-key-store-overview.html">Custom Key Store feature</a> feature in AWS KMS, which combines the convenience and extensive integration of AWS KMS with the isolation and control of a single-tenant key store.</p>
<p>By default, this operation returns information about all custom key stores in the account and region. To get only information about a particular custom key store, use either the <tt class="docutils literal"><span class="pre">CustomKeyStoreName</span></tt> or <tt class="docutils literal"><span class="pre">CustomKeyStoreId</span></tt> parameter (but not both).</p>
<p>To determine whether the custom key store is connected to its AWS CloudHSM cluster, use the <tt class="docutils literal"><span class="pre">ConnectionState</span></tt> element in the response. If an attempt to connect the custom key store failed, the <tt class="docutils literal"><span class="pre">ConnectionState</span></tt> value is <tt class="docutils literal"><span class="pre">FAILED</span></tt> and the <tt class="docutils literal"><span class="pre">ConnectionErrorCode</span></tt> element in the response indicates the cause of the failure. For help interpreting the <tt class="docutils literal"><span class="pre">ConnectionErrorCode</span></tt> , see  CustomKeyStoresListEntry .</p>
<p>Custom key stores have a <tt class="docutils literal"><span class="pre">DISCONNECTED</span></tt> connection state if the key store has never been connected or you use the  DisconnectCustomKeyStore operation to disconnect it. If your custom key store state is <tt class="docutils literal"><span class="pre">CONNECTED</span></tt> but you are having trouble using it, make sure that its associated AWS CloudHSM cluster is active and contains the minimum number of HSMs required for the operation, if any.</p>
<p>For help repairing your custom key store, see the <a class="reference external" href="https://docs.aws.amazon.com/kms/latest/developerguide/fix-keystore.html">Troubleshooting Custom Key Stores</a> topic in the <em>AWS Key Management Service Developer Guide</em> .</p>
<p>See also: <a class="reference external" href="https://docs.aws.amazon.com/goto/WebAPI/kms-2014-11-01/DescribeCustomKeyStores">AWS API Documentation</a></p>
<p>See <a class="reference internal" href="../index.html"><em>'aws help'</em></a> for descriptions of global parameters.</p>
</div>
<div class="section" id="synopsis">
<h2>Synopsis<a class="headerlink" href="#synopsis" title="Permalink to this headline">¶</a>
</h2>
<div class="highlight-python">
<pre>  describe-custom-key-stores
[--custom-key-store-id &lt;value&gt;]
[--custom-key-store-name &lt;value&gt;]
[--limit &lt;value&gt;]
[--marker &lt;value&gt;]
[--cli-input-json &lt;value&gt;]
[--generate-cli-skeleton &lt;value&gt;]</pre>
</div>
</div>
<div class="section" id="options">
<h2>Options<a class="headerlink" href="#options" title="Permalink to this headline">¶</a>
</h2>
<p><tt class="docutils literal"><span class="pre">--custom-key-store-id</span></tt> (string)</p>
<blockquote>
<div>
<p>Gets only information about the specified custom key store. Enter the key store ID.</p>
<p>By default, this operation gets information about all custom key stores in the account and region. To limit the output to a particular custom key store, you can use either the <tt class="docutils literal"><span class="pre">CustomKeyStoreId</span></tt> or <tt class="docutils literal"><span class="pre">CustomKeyStoreName</span></tt> parameter, but not both.</p>
</div>
</blockquote>
<p><tt class="docutils literal"><span class="pre">--custom-key-store-name</span></tt> (string)</p>
<blockquote>
<div>
<p>Gets only information about the specified custom key store. Enter the friendly name of the custom key store.</p>
<p>By default, this operation gets information about all custom key stores in the account and region. To limit the output to a particular custom key store, you can use either the <tt class="docutils literal"><span class="pre">CustomKeyStoreId</span></tt> or <tt class="docutils literal"><span class="pre">CustomKeyStoreName</span></tt> parameter, but not both.</p>
</div>
</blockquote>
<p><tt class="docutils literal"><span class="pre">--limit</span></tt> (integer)</p>
<blockquote>
<div>Use this parameter to specify the maximum number of items to return. When this value is present, AWS KMS does not return more than the specified number of items, but it might return fewer.</div>
</blockquote>
<p><tt class="docutils literal"><span class="pre">--marker</span></tt> (string)</p>
<blockquote>
<div>Use this parameter in a subsequent request after you receive a response with truncated results. Set it to the value of <tt class="docutils literal"><span class="pre">NextMarker</span></tt> from the truncated response you just received.</div>
</blockquote>
<p><tt class="docutils literal"><span class="pre">--cli-input-json</span></tt> (string)
Performs service operation based on the JSON string provided. The JSON string follows the format provided by <tt class="docutils literal"><span class="pre">--generate-cli-skeleton</span></tt>. If other arguments are provided on the command line, the CLI values will override the JSON-provided values. It is not possible to pass arbitrary binary values using a JSON-provided value as the string will be taken literally.</p>
<p><tt class="docutils literal"><span class="pre">--generate-cli-skeleton</span></tt> (string)
Prints a JSON skeleton to standard output without sending an API request. If provided with no value or the value <tt class="docutils literal"><span class="pre">input</span></tt>, prints a sample input JSON that can be used as an argument for <tt class="docutils literal"><span class="pre">--cli-input-json</span></tt>. If provided with the value <tt class="docutils literal"><span class="pre">output</span></tt>, it validates the command inputs and returns a sample output JSON for that command.</p>
<p>See <a class="reference internal" href="../index.html"><em>'aws help'</em></a> for descriptions of global parameters.</p>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a>
</h2>
<p><strong>To get details about a custom key store</strong></p>
<p>The following <tt class="docutils literal"><span class="pre">describe-custom-key-store</span></tt> example displays details for the specified custom key store. You can use this command to get details about a particular custom key store or all custom key stores in an AWS account and Region.</p>
<p>To identify a particular custom key store, this example uses the <tt class="docutils literal"><span class="pre">custom-key-store-name</span></tt> parameter with the key store name. If you prefer, you can use the <tt class="docutils literal"><span class="pre">custom-key-store-id</span></tt> parameter with the key store ID. To get all custom key stores in the account and Region, omit all parameters.</p>
<div class="highlight-python">
<pre>aws kms describe-custom-key-stores \
    --custom-key-store-name ExampleKeyStore</pre>
</div>
<p>The output of this command includes useful details about the custom key store including its connection state (<tt class="docutils literal"><span class="pre">ConnectionState</span></tt>). If the connection state is <tt class="docutils literal"><span class="pre">FAILED</span></tt>, the output includes a <tt class="docutils literal"><span class="pre">ConnectionErrorCode</span></tt> field that describes the problem.</p>
<div class="highlight-python">
<div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">"CustomKeyStores"</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">"CloudHsmClusterId"</span><span class="p">:</span> <span class="s2">"cluster-1a23b4cdefg"</span><span class="p">,</span>
            <span class="s2">"ConnectionState"</span><span class="p">:</span> <span class="s2">"CONNECTED"</span><span class="p">,</span>
            <span class="s2">"CreationDate"</span><span class="p">:</span> <span class="s2">"1.599288695918E9"</span><span class="p">,</span>
            <span class="s2">"CustomKeyStoreId"</span><span class="p">:</span> <span class="s2">"cks-1234567890abcdef0"</span><span class="p">,</span>
            <span class="s2">"CustomKeyStoreName"</span><span class="p">:</span> <span class="s2">"ExampleKeyStore"</span><span class="p">,</span>
            <span class="s2">"TrustAnchorCertificate"</span><span class="p">:</span> <span class="s2">"&lt;certificate appears here&gt;"</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>For more information, see <a class="reference external" href="https://docs.aws.amazon.com/kms/latest/developerguide/view-keystore.html">Viewing a Custom Key Store</a> in the <em>AWS Key Management Service Developer Guide</em>.</p>
</div>
<div class="section" id="output">
<h2>Output<a class="headerlink" href="#output" title="Permalink to this headline">¶</a>
</h2>
<p>CustomKeyStores -&gt; (list)</p>
<blockquote>
<div>
<p>Contains metadata about each custom key store.</p>
<p>(structure)</p>
<blockquote>
<div>
<p>Contains information about each custom key store in the custom key store list.</p>
<p>CustomKeyStoreId -&gt; (string)</p>
<blockquote>
<div>A unique identifier for the custom key store.</div>
</blockquote>
<p>CustomKeyStoreName -&gt; (string)</p>
<blockquote>
<div>The user-specified friendly name for the custom key store.</div>
</blockquote>
<p>CloudHsmClusterId -&gt; (string)</p>
<blockquote>
<div>A unique identifier for the AWS CloudHSM cluster that is associated with the custom key store.</div>
</blockquote>
<p>TrustAnchorCertificate -&gt; (string)</p>
<blockquote>
<div>The trust anchor certificate of the associated AWS CloudHSM cluster. When you <a class="reference external" href="https://docs.aws.amazon.com/cloudhsm/latest/userguide/initialize-cluster.html#sign-csr">initialize the cluster</a> , you create this certificate and save it in the <tt class="docutils literal"><span class="pre">customerCA.crt</span></tt> file.</div>
</blockquote>
<p>ConnectionState -&gt; (string)</p>
<blockquote>
<div>
<p>Indicates whether the custom key store is connected to its AWS CloudHSM cluster.</p>
<p>You can create and use CMKs in your custom key stores only when its connection state is <tt class="docutils literal"><span class="pre">CONNECTED</span></tt> .</p>
<p>The value is <tt class="docutils literal"><span class="pre">DISCONNECTED</span></tt> if the key store has never been connected or you use the  DisconnectCustomKeyStore operation to disconnect it. If the value is <tt class="docutils literal"><span class="pre">CONNECTED</span></tt> but you are having trouble using the custom key store, make sure that its associated AWS CloudHSM cluster is active and contains at least one active HSM.</p>
<p>A value of <tt class="docutils literal"><span class="pre">FAILED</span></tt> indicates that an attempt to connect was unsuccessful. For help resolving a connection failure, see <a class="reference external" href="https://docs.aws.amazon.com/kms/latest/developerguide/fix-keystore.html">Troubleshooting a Custom Key Store</a> in the <em>AWS Key Management Service Developer Guide</em> .</p>
</div>
</blockquote>
<p>ConnectionErrorCode -&gt; (string)</p>
<blockquote>
<div>
<p>Describes the connection error. Valid values are:</p>
<ul class="simple">
<li>
<tt class="docutils literal"><span class="pre">CLUSTER_NOT_FOUND</span></tt> - AWS KMS cannot find the AWS CloudHSM cluster with the specified cluster ID.</li>
<li>
<tt class="docutils literal"><span class="pre">INSUFFICIENT_CLOUDHSM_HSMS</span></tt> - The associated AWS CloudHSM cluster does not contain any active HSMs. To connect a custom key store to its AWS CloudHSM cluster, the cluster must contain at least one active HSM.</li>
<li>
<tt class="docutils literal"><span class="pre">INTERNAL_ERROR</span></tt> - AWS KMS could not complete the request due to an internal error. Retry the request. For <tt class="docutils literal"><span class="pre">ConnectCustomKeyStore</span></tt> requests, disconnect the custom key store before trying to connect again.</li>
<li>
<tt class="docutils literal"><span class="pre">INVALID_CREDENTIALS</span></tt> - AWS KMS does not have the correct password for the <tt class="docutils literal"><span class="pre">kmsuser</span></tt> crypto user in the AWS CloudHSM cluster.</li>
<li>
<tt class="docutils literal"><span class="pre">NETWORK_ERRORS</span></tt> - Network errors are preventing AWS KMS from connecting to the custom key store.</li>
<li>
<tt class="docutils literal"><span class="pre">USER_LOCKED_OUT</span></tt> - The <tt class="docutils literal"><span class="pre">kmsuser</span></tt> CU account is locked out of the associated AWS CloudHSM cluster due to too many failed password attempts. Before you can connect your custom key store to its AWS CloudHSM cluster, you must change the <tt class="docutils literal"><span class="pre">kmsuser</span></tt> account password and update the password value for the custom key store.</li>
</ul>
<p>For help with connection failures, see <a class="reference external" href="https://docs.aws.amazon.com/kms/latest/developerguide/fix-keystore.html">Troubleshooting Custom Key Stores</a> in the <em>AWS Key Management Service Developer Guide</em> .</p>
</div>
</blockquote>
<p>CreationDate -&gt; (timestamp)</p>
<blockquote>
<div>The date and time when the custom key store was created.</div>
</blockquote>
</div>
</blockquote>
</div>
</blockquote>
<p>NextMarker -&gt; (string)</p>
<blockquote>
<div>When <tt class="docutils literal"><span class="pre">Truncated</span></tt> is true, this element is present and contains the value to use for the <tt class="docutils literal"><span class="pre">Marker</span></tt> parameter in a subsequent request.</div>
</blockquote>
<p>Truncated -&gt; (boolean)</p>
<blockquote>
<div>A flag that indicates whether there are more items in the list. When this value is true, the list in this response is truncated. To get more items, pass the value of the <tt class="docutils literal"><span class="pre">NextMarker</span></tt> element in thisresponse to the <tt class="docutils literal"><span class="pre">Marker</span></tt> parameter in a subsequent request.</div>
</blockquote>
</div>
</div>


            </div>
          <div class="clearfix"></div>
        </div>
        
    
  

    </div>
  <script type="text/javascript" src="https://media.amazonwebservices.com/js/sitecatalyst/s_code.min.js"></script>
  <script type="text/javascript">
  s.prop66 = 'AWS CLI';
  s.eVar66 = 'D=c66';
  s.prop65 = 'API Reference';
  s.eVar65 = 'D=c65';
  var s_code = s.t();
  if (s_code) document.write(s_code);
  </script>
    
  



  
    
  
  </body>
</html>
