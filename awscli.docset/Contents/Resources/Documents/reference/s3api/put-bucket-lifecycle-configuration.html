<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    
  
    <title>put-bucket-lifecycle-configuration — AWS CLI 1.16.309 Command Reference</title>
  <link rel="stylesheet" type="text/css" href="../../_static/bootstrap.min.css">
  <script type="text/javascript" src="../../_static/jquery-1.9.1.min.js"></script>
  <script src="/SdkStatic/sdk-priv.js" async="true"></script>
    
    <link rel="stylesheet" href="../../_static/guzzle.css" type="text/css">
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css">
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.16.309',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="AWS CLI 1.16.309 Command Reference" href="../../index.html">
    <link rel="up" title="s3api" href="index.html">
    <link rel="next" title="put-bucket-logging" href="put-bucket-logging.html">
    <link rel="prev" title="put-bucket-inventory-configuration" href="put-bucket-inventory-configuration.html">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" type="text/css" href="../../_static/bootstrap-responsive.min.css">
  
   

  </head>
  <body>
  
  
  <!--REGION_DISCLAIMER_DO_NOT_REMOVE-->

    
    <div class="container">
        
    
  
        <div class="document clearer">
      
            <div class="body">
              
  
<div class="section" id="put-bucket-lifecycle-configuration">
<span id="cli-aws-s3api-put-bucket-lifecycle-configuration"></span><h1>put-bucket-lifecycle-configuration<a class="headerlink" href="#put-bucket-lifecycle-configuration" title="Permalink to this headline">¶</a>
</h1>
<div class="section" id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a>
</h2>
<p>Creates a new lifecycle configuration for the bucket or replaces an existing lifecycle configuration. For information about lifecycle configuration, see <a class="reference external" href="https://docs.aws.amazon.com/AmazonS3/latest/dev/s3-access-control.html">Managing Access Permissions to Your Amazon S3 Resources</a> .</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<blockquote>
<div>Bucket lifecycle configuration now supports specifying a lifecycle rule using an object key name prefix, one or more object tags, or a combination of both. Accordingly, this section describes the latest API. The previous version of the API supported filtering based only on an object key name prefix, which is supported for backward compatibility. For the related API description, see  PutBucketLifecycle .</div>
</blockquote>
<p class="last"><strong>Rules</strong></p>
</div>
<p>You specify the lifecycle configuration in your request body. The lifecycle configuration is specified as XML consisting of one or more rules. Each rule consists of the following:</p>
<ul class="simple">
<li>Filter identifying a subset of objects to which the rule applies. The filter can be based on a key name prefix, object tags, or a combination of both.</li>
<li>Status whether the rule is in effect.</li>
<li>One or more lifecycle transition and expiration actions that you want Amazon S3 to perform on the objects identified by the filter. If the state of your bucket is versioning-enabled or versioning-suspended, you can have many versions of the same object (one current version and zero or more noncurrent versions). Amazon S3 provides predefined actions that you can specify for current and noncurrent object versions.</li>
</ul>
<p>For more information, see <a class="reference external" href="https://docs.aws.amazon.com/AmazonS3/latest/dev/object-lifecycle-mgmt.html">Object Lifecycle Management</a> and <a class="reference external" href="https://docs.aws.amazon.com/AmazonS3/latest/dev/intro-lifecycle-rules.html">Lifecycle Configuration Elements</a> .</p>
<blockquote>
<div><strong>Permissions</strong></div>
</blockquote>
<p>By default, all Amazon S3 resources are private, including buckets, objects, and related subresources (for example, lifecycle configuration and website configuration). Only the resource owner (that is, the AWS account that created it) can access the resource. The resource owner can optionally grant access permissions to others by writing an access policy. For this operation, a user must get the s3:PutLifecycleConfiguration permission.</p>
<p>You can also explicitly deny permissions. Explicit deny also supersedes any other permissions. If you want to block users or accounts from removing or deleting objects from your bucket, you must deny them permissions for the following actions:</p>
<ul class="simple">
<li>s3:DeleteObject</li>
<li>s3:DeleteObjectVersion</li>
<li>s3:PutLifecycleConfiguration</li>
</ul>
<p>For more information about permissions, see <a class="reference external" href="https://docs.aws.amazon.com/AmazonS3/latest/dev/s3-access-control.html">Managing Access Permissions to Your Amazon S3 Resources</a> .</p>
<p>The following are related to <tt class="docutils literal"><span class="pre">PutBucketLifecycleConfiguration</span></tt> :</p>
<ul class="simple">
<li><a class="reference external" href="https://docs.aws.amazon.com/AmazonS3/latest/dev/lifecycle-configuration-examples.html">Examples of Lifecycle Configuration</a></li>
<li>GetBucketLifecycleConfiguration</li>
<li>DeleteBucketLifecycle</li>
</ul>
<p>See also: <a class="reference external" href="https://docs.aws.amazon.com/goto/WebAPI/s3-2006-03-01/PutBucketLifecycleConfiguration">AWS API Documentation</a></p>
<p>See <a class="reference internal" href="../index.html"><em>'aws help'</em></a> for descriptions of global parameters.</p>
</div>
<div class="section" id="synopsis">
<h2>Synopsis<a class="headerlink" href="#synopsis" title="Permalink to this headline">¶</a>
</h2>
<div class="highlight-python">
<pre>  put-bucket-lifecycle-configuration
--bucket &lt;value&gt;
[--lifecycle-configuration &lt;value&gt;]
[--cli-input-json &lt;value&gt;]
[--generate-cli-skeleton &lt;value&gt;]</pre>
</div>
</div>
<div class="section" id="options">
<h2>Options<a class="headerlink" href="#options" title="Permalink to this headline">¶</a>
</h2>
<p><tt class="docutils literal"><span class="pre">--bucket</span></tt> (string)</p>
<blockquote>
<div>The name of the bucket for which to set the configuration.</div>
</blockquote>
<p><tt class="docutils literal"><span class="pre">--lifecycle-configuration</span></tt> (structure)</p>
<blockquote>
<div>Container for lifecycle rules. You can add as many as 1,000 rules.</div>
</blockquote>
<p>JSON Syntax:</p>
<div class="highlight-python">
<pre>{
  "Rules": [
    {
      "Expiration": {
        "Date": timestamp,
        "Days": integer,
        "ExpiredObjectDeleteMarker": true|false
      },
      "ID": "string",
      "Prefix": "string",
      "Filter": {
        "Prefix": "string",
        "Tag": {
          "Key": "string",
          "Value": "string"
        },
        "And": {
          "Prefix": "string",
          "Tags": [
            {
              "Key": "string",
              "Value": "string"
            }
            ...
          ]
        }
      },
      "Status": "Enabled"|"Disabled",
      "Transitions": [
        {
          "Date": timestamp,
          "Days": integer,
          "StorageClass": "GLACIER"|"STANDARD_IA"|"ONEZONE_IA"|"INTELLIGENT_TIERING"|"DEEP_ARCHIVE"
        }
        ...
      ],
      "NoncurrentVersionTransitions": [
        {
          "NoncurrentDays": integer,
          "StorageClass": "GLACIER"|"STANDARD_IA"|"ONEZONE_IA"|"INTELLIGENT_TIERING"|"DEEP_ARCHIVE"
        }
        ...
      ],
      "NoncurrentVersionExpiration": {
        "NoncurrentDays": integer
      },
      "AbortIncompleteMultipartUpload": {
        "DaysAfterInitiation": integer
      }
    }
    ...
  ]
}</pre>
</div>
<p><tt class="docutils literal"><span class="pre">--cli-input-json</span></tt> (string)
Performs service operation based on the JSON string provided. The JSON string follows the format provided by <tt class="docutils literal"><span class="pre">--generate-cli-skeleton</span></tt>. If other arguments are provided on the command line, the CLI values will override the JSON-provided values. It is not possible to pass arbitrary binary values using a JSON-provided value as the string will be taken literally.</p>
<p><tt class="docutils literal"><span class="pre">--generate-cli-skeleton</span></tt> (string)
Prints a JSON skeleton to standard output without sending an API request. If provided with no value or the value <tt class="docutils literal"><span class="pre">input</span></tt>, prints a sample input JSON that can be used as an argument for <tt class="docutils literal"><span class="pre">--cli-input-json</span></tt>. If provided with the value <tt class="docutils literal"><span class="pre">output</span></tt>, it validates the command inputs and returns a sample output JSON for that command.</p>
<p>See <a class="reference internal" href="../index.html"><em>'aws help'</em></a> for descriptions of global parameters.</p>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a>
</h2>
<p>The following command applies a lifecycle configuration to a bucket named <tt class="docutils literal"><span class="pre">my-bucket</span></tt>:</p>
<div class="highlight-python">
<pre>aws s3api put-bucket-lifecycle-configuration --bucket my-bucket --lifecycle-configuration  file://lifecycle.json</pre>
</div>
<p>The file <tt class="docutils literal"><span class="pre">lifecycle.json</span></tt> is a JSON document in the current folder that specifies two rules:</p>
<div class="highlight-python">
<div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">"Rules"</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">"ID"</span><span class="p">:</span> <span class="s2">"Move rotated logs to Glacier"</span><span class="p">,</span>
            <span class="s2">"Prefix"</span><span class="p">:</span> <span class="s2">"rotated/"</span><span class="p">,</span>
            <span class="s2">"Status"</span><span class="p">:</span> <span class="s2">"Enabled"</span><span class="p">,</span>
            <span class="s2">"Transitions"</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="s2">"Date"</span><span class="p">:</span> <span class="s2">"2015-11-10T00:00:00.000Z"</span><span class="p">,</span>
                    <span class="s2">"StorageClass"</span><span class="p">:</span> <span class="s2">"GLACIER"</span>
                <span class="p">}</span>
            <span class="p">]</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">"Status"</span><span class="p">:</span> <span class="s2">"Enabled"</span><span class="p">,</span>
            <span class="s2">"Prefix"</span><span class="p">:</span> <span class="s2">""</span><span class="p">,</span>
            <span class="s2">"NoncurrentVersionTransitions"</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="s2">"NoncurrentDays"</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
                    <span class="s2">"StorageClass"</span><span class="p">:</span> <span class="s2">"GLACIER"</span>
                <span class="p">}</span>
            <span class="p">],</span>
            <span class="s2">"ID"</span><span class="p">:</span> <span class="s2">"Move old versions to Glacier"</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The first rule moves files with the prefix <tt class="docutils literal"><span class="pre">rotated</span></tt> to Glacier on the specified date. The second rule moves old object versions to Glacier when they are no longer current. For information on acceptable timestamp formats, see <a class="reference external" href="http://docs.aws.amazon.com/cli/latest/userguide/cli-using-param.html">Specifying Parameter Values</a> in the <em>AWS CLI User Guide</em>.</p>
</div>
<div class="section" id="output">
<h2>Output<a class="headerlink" href="#output" title="Permalink to this headline">¶</a>
</h2>
<p>None</p>
</div>
</div>


            </div>
          <div class="clearfix"></div>
        </div>
        
    
  

    </div>
  <script type="text/javascript" src="https://media.amazonwebservices.com/js/sitecatalyst/s_code.min.js"></script>
  <script type="text/javascript">
  s.prop66 = 'AWS CLI';
  s.eVar66 = 'D=c66';
  s.prop65 = 'API Reference';
  s.eVar65 = 'D=c65';
  var s_code = s.t();
  if (s_code) document.write(s_code);
  </script>
    
  



  
    
  
  </body>
</html>
