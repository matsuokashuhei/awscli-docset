<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    
  
    <title>add-permission — AWS CLI 1.16.298 Command Reference</title>
  <link rel="stylesheet" type="text/css" href="../../_static/bootstrap.min.css">
  <script type="text/javascript" src="../../_static/jquery-1.9.1.min.js"></script>
  <script src="/SdkStatic/sdk-priv.js" async="true"></script>
    
    <link rel="stylesheet" href="../../_static/guzzle.css" type="text/css">
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css">
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.16.298',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="AWS CLI 1.16.298 Command Reference" href="../../index.html">
    <link rel="up" title="lambda" href="index.html">
    <link rel="next" title="create-alias" href="create-alias.html">
    <link rel="prev" title="add-layer-version-permission" href="add-layer-version-permission.html">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" type="text/css" href="../../_static/bootstrap-responsive.min.css">
  
   

  </head>
  <body>
  
  
  <!--REGION_DISCLAIMER_DO_NOT_REMOVE-->

    
    <div class="container">
        
    
  
        <div class="document clearer">
      
            <div class="body">
              
  
<div class="section" id="add-permission">
<span id="cli-aws-lambda-add-permission"></span><h1>add-permission<a class="headerlink" href="#add-permission" title="Permalink to this headline">¶</a>
</h1>
<div class="section" id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a>
</h2>
<p>Grants an AWS service or another account permission to use a function. You can apply the policy at the function level, or specify a qualifier to restrict access to a single version or alias. If you use a qualifier, the invoker must use the full Amazon Resource Name (ARN) of that version or alias to invoke the function.</p>
<p>To grant permission to another account, specify the account ID as the <tt class="docutils literal"><span class="pre">Principal</span></tt> . For AWS services, the principal is a domain-style identifier defined by the service, like <tt class="docutils literal"><span class="pre">s3.amazonaws.com</span></tt> or <tt class="docutils literal"><span class="pre">sns.amazonaws.com</span></tt> . For AWS services, you can also specify the ARN or owning account of the associated resource as the <tt class="docutils literal"><span class="pre">SourceArn</span></tt> or <tt class="docutils literal"><span class="pre">SourceAccount</span></tt> . If you grant permission to a service principal without specifying the source, other accounts could potentially configure resources in their account to invoke your Lambda function.</p>
<p>This action adds a statement to a resource-based permissions policy for the function. For more information about function policies, see <a class="reference external" href="https://docs.aws.amazon.com/lambda/latest/dg/access-control-resource-based.html">Lambda Function Policies</a> .</p>
<p>See also: <a class="reference external" href="https://docs.aws.amazon.com/goto/WebAPI/lambda-2015-03-31/AddPermission">AWS API Documentation</a></p>
<p>See <a class="reference internal" href="../index.html"><em>'aws help'</em></a> for descriptions of global parameters.</p>
</div>
<div class="section" id="synopsis">
<h2>Synopsis<a class="headerlink" href="#synopsis" title="Permalink to this headline">¶</a>
</h2>
<div class="highlight-python">
<pre>  add-permission
--function-name &lt;value&gt;
--statement-id &lt;value&gt;
--action &lt;value&gt;
--principal &lt;value&gt;
[--source-arn &lt;value&gt;]
[--source-account &lt;value&gt;]
[--event-source-token &lt;value&gt;]
[--qualifier &lt;value&gt;]
[--revision-id &lt;value&gt;]
[--cli-input-json &lt;value&gt;]
[--generate-cli-skeleton &lt;value&gt;]</pre>
</div>
</div>
<div class="section" id="options">
<h2>Options<a class="headerlink" href="#options" title="Permalink to this headline">¶</a>
</h2>
<p><tt class="docutils literal"><span class="pre">--function-name</span></tt> (string)</p>
<blockquote>
<div>
<p>The name of the Lambda function, version, or alias.</p>
<blockquote>
<div><strong>Name formats</strong></div>
</blockquote>
<ul class="simple">
<li>
<strong>Function name</strong> - <tt class="docutils literal"><span class="pre">my-function</span></tt> (name-only), <tt class="docutils literal"><span class="pre">my-function:v1</span></tt> (with alias).</li>
<li>
<strong>Function ARN</strong> - <tt class="docutils literal"><span class="pre">arn:aws:lambda:us-west-2:123456789012:function:my-function</span></tt> .</li>
<li>
<strong>Partial ARN</strong> - <tt class="docutils literal"><span class="pre">123456789012:function:my-function</span></tt> .</li>
</ul>
<p>You can append a version number or alias to any of the formats. The length constraint applies only to the full ARN. If you specify only the function name, it is limited to 64 characters in length.</p>
</div>
</blockquote>
<p><tt class="docutils literal"><span class="pre">--statement-id</span></tt> (string)</p>
<blockquote>
<div>A statement identifier that differentiates the statement from others in the same policy.</div>
</blockquote>
<p><tt class="docutils literal"><span class="pre">--action</span></tt> (string)</p>
<blockquote>
<div>The action that the principal can use on the function. For example, <tt class="docutils literal"><span class="pre">lambda:InvokeFunction</span></tt> or <tt class="docutils literal"><span class="pre">lambda:GetFunction</span></tt> .</div>
</blockquote>
<p><tt class="docutils literal"><span class="pre">--principal</span></tt> (string)</p>
<blockquote>
<div>The AWS service or account that invokes the function. If you specify a service, use <tt class="docutils literal"><span class="pre">SourceArn</span></tt> or <tt class="docutils literal"><span class="pre">SourceAccount</span></tt> to limit who can invoke the function through that service.</div>
</blockquote>
<p><tt class="docutils literal"><span class="pre">--source-arn</span></tt> (string)</p>
<blockquote>
<div>For AWS services, the ARN of the AWS resource that invokes the function. For example, an Amazon S3 bucket or Amazon SNS topic.</div>
</blockquote>
<p><tt class="docutils literal"><span class="pre">--source-account</span></tt> (string)</p>
<blockquote>
<div>For AWS services, the ID of the account that owns the resource. Use this instead of <tt class="docutils literal"><span class="pre">SourceArn</span></tt> to grant permission to resources that are owned by another account (for example, all of an account's Amazon S3 buckets). Or use it together with <tt class="docutils literal"><span class="pre">SourceArn</span></tt> to ensure that the resource is owned by the specified account. For example, an Amazon S3 bucket could be deleted by its owner and recreated by another account.</div>
</blockquote>
<p><tt class="docutils literal"><span class="pre">--event-source-token</span></tt> (string)</p>
<blockquote>
<div>For Alexa Smart Home functions, a token that must be supplied by the invoker.</div>
</blockquote>
<p><tt class="docutils literal"><span class="pre">--qualifier</span></tt> (string)</p>
<blockquote>
<div>Specify a version or alias to add permissions to a published version of the function.</div>
</blockquote>
<p><tt class="docutils literal"><span class="pre">--revision-id</span></tt> (string)</p>
<blockquote>
<div>Only update the policy if the revision ID matches the ID that's specified. Use this option to avoid modifying a policy that has changed since you last read it.</div>
</blockquote>
<p><tt class="docutils literal"><span class="pre">--cli-input-json</span></tt> (string)
Performs service operation based on the JSON string provided. The JSON string follows the format provided by <tt class="docutils literal"><span class="pre">--generate-cli-skeleton</span></tt>. If other arguments are provided on the command line, the CLI values will override the JSON-provided values. It is not possible to pass arbitrary binary values using a JSON-provided value as the string will be taken literally.</p>
<p><tt class="docutils literal"><span class="pre">--generate-cli-skeleton</span></tt> (string)
Prints a JSON skeleton to standard output without sending an API request. If provided with no value or the value <tt class="docutils literal"><span class="pre">input</span></tt>, prints a sample input JSON that can be used as an argument for <tt class="docutils literal"><span class="pre">--cli-input-json</span></tt>. If provided with the value <tt class="docutils literal"><span class="pre">output</span></tt>, it validates the command inputs and returns a sample output JSON for that command.</p>
<p>See <a class="reference internal" href="../index.html"><em>'aws help'</em></a> for descriptions of global parameters.</p>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a>
</h2>
<p><strong>To add permissions to an existing Lambda function</strong></p>
<p>The following <tt class="docutils literal"><span class="pre">add-permission</span></tt> example grants the Amazon SNS service permission to invoke a function named <tt class="docutils literal"><span class="pre">my-function</span></tt>.</p>
<div class="highlight-python">
<pre>aws lambda add-permission \
    --function-name my-function \
    --action lambda:InvokeFunction \
    --statement-id sns \
    --principal sns.amazonaws.com</pre>
</div>
<p>Output:</p>
<div class="highlight-python">
<div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">"Statement"</span><span class="p">:</span>
    <span class="p">{</span>
        <span class="s2">"Sid"</span><span class="p">:</span><span class="s2">"sns"</span><span class="p">,</span>
        <span class="s2">"Effect"</span><span class="p">:</span><span class="s2">"Allow"</span><span class="p">,</span>
        <span class="s2">"Principal"</span><span class="p">:{</span>
            <span class="s2">"Service"</span><span class="p">:</span><span class="s2">"sns.amazonaws.com"</span>
        <span class="p">},</span>
        <span class="s2">"Action"</span><span class="p">:</span><span class="s2">"lambda:InvokeFunction"</span><span class="p">,</span>
        <span class="s2">"Resource"</span><span class="p">:</span><span class="s2">"arn:aws:lambda:us-east-2:123456789012:function:my-function"</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>For more information, see <a class="reference external" href="https://docs.aws.amazon.com/lambda/latest/dg/access-control-resource-based.html">Using Resource-based Policies for AWS Lambda</a> in the <em>AWS Lambda Developer Guide</em>.</p>
</div>
<div class="section" id="output">
<h2>Output<a class="headerlink" href="#output" title="Permalink to this headline">¶</a>
</h2>
<p>Statement -&gt; (string)</p>
<blockquote>
<div>The permission statement that's added to the function policy.</div>
</blockquote>
</div>
</div>


            </div>
          <div class="clearfix"></div>
        </div>
        
    
  

    </div>
  <script type="text/javascript" src="https://media.amazonwebservices.com/js/sitecatalyst/s_code.min.js"></script>
  <script type="text/javascript">
  s.prop66 = 'AWS CLI';
  s.eVar66 = 'D=c66';
  s.prop65 = 'API Reference';
  s.eVar65 = 'D=c65';
  var s_code = s.t();
  if (s_code) document.write(s_code);
  </script>
    
  



  
    
  
  </body>
</html>
